<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="4" MadCap:lastHeight="2236" MadCap:lastWidth="826">
    <head>
    </head>
    <body>
        <h1>Adding Treatment Interactions</h1>
        <p MadCap:conditions="General.DeveloperNotes"><span class="comment">Based on this document, entered 10/9/2017: https://docs.google.com/document/d/16DdfFh68uAHbGS8zBzEtDji_UuhS4Lncg8pmy0oS958/edit</span>
        </p>
        <p>Within FTEM, there exist both point and perimeter wildfires: </p>
        <ul>
            <li>A point wildfire contains a geographic location (latitude and longitude of the point of origin) as well as a size in acres but contains no other information to define where the fire burned.  </li>
            <li>A perimeter wildfire contains a multi-polygon shape file (its perimeter) in addition to its point of origin.  </li>
        </ul>
        <p>The same is true for treatments.  That is, some treatments only contain a point of origin and size while other treatments include a multi-polygon shape as well to define their extent.  The purpose of this document is two-fold.  That is, it discusses how wildfire treatment interactions are initially determined by a utility program as well as how they can be updated by FTEM users within the application.</p>
        <h2>Point Wildfires</h2>
        <p>In all cases, a circle with its center at the wildfire’s point of origin is used to determine the potential treatment interactions for a point wildfire.  For the utility program, the radius of the circle is based upon calculating the length of an ellipse whose length is 1.5 times its width and whose area is equal to the size of the wildfire.  The radius of the circle is set to 1.2 times the length of the ellipse (a minimum size of 10 acres is used to determine the circle’s radius).  Thus, for a fire whose area is less than or equal to 10 acres, a radius of 334 meters is used.  Similarly, a radius of 1054 meters is used for a fire size of 100 acres while a radius of 2668 meters is used for a fire size of 640 acres (a square mile).  Within the FTEM application, users are allowed to specify the radius of the circle.  The maximum permitted value is 25000 meters. (This value is specified in the database and can be changed.)</p>
        <p>Regardless of how the treatment interaction is added the area of intersection is not set since no perimeter exists for the fire.  Consequently, the area of intersection must be set manually by a user entering information from the monitoring tab of the FTEM application.</p>
        <p>
            <img src="../Resources/Images/FTEM/buffering.png" alt="buffering as described in text" class="border" />
        </p>
        <h2>Perimeter Wildfires</h2>
        <p>In all cases, a buffered perimeter is used to determine the treatment interactions for a wildfire with an associated perimeter.  For the utility program, the perimeter is buffered by 500 meters.  Within the FTEM application, users are allowed to specify a buffer size up to 1500 meters to buffer the perimeter.  For point treatments, the treatment is included if the point falls within the buffered perimeter.  For polygon treatments, the treatment is included if the polygon intersects the buffered perimeter.</p>
        <p>The area of intersection for polygon treatments is the area of intersection between the actual fire perimeter (as opposed to the buffered perimeter) and the polygon treatment.  The area of intersection must be set manually for point treatments.</p>
        <h2>Automated Setting of Treatment Interactions</h2>
        <p>Potential treatment interactions are only added when a fire is first added to FTEM.  When a new fire is added, a flag is set within the record for the wildfire indicating that treatment interactions have not been initialized for the wildfire.  A separate utility is run that uses this flag to determine that treatment interactions need to be set for a given wildfire.  During normal processing, wildfires (and updates to existing wildfires) are first pulled from IRWIN.  Next, perimeters (new as well as updates) are pulled from GeoMAC.  After this step is completed, point treatments are updated followed by polygon treatments.  The last utility to run is the utility that adds the potential treatment interactions.</p>
        <p>
            <img src="../Resources/Images/FTEM/integrated_wildfire_data.png" alt="data as described in text" class="border" />
        </p>
        <h2>Monitoring the Utilities</h2>
        <p>An email is generated by each of the five utilities in this process. The emails are sent to the email addresses included in the property file for the utilities.  As a result, we monitor whether or not each utility is successful by checking our email.</p>
    </body>
</html>